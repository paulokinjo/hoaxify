{"ast":null,"code":"import * as apiCalls from '../api/apiCalls';\nimport { applyMiddleware, createStore } from 'redux';\nimport authReducer from './authReducer';\nimport logger from 'redux-logger';\nimport thunk from 'redux-thunk';\n\nconst configureStore = (addLogger = true) => {\n  let localStorageData = localStorage.getItem('hoax-auth');\n  let presistedState = {\n    id: 0,\n    username: '',\n    displayName: '',\n    image: '',\n    password: '',\n    isLoggedIn: false\n  };\n\n  if (localStorageData) {\n    try {\n      presistedState = JSON.parse(localStorageData);\n    } catch (error) {}\n  }\n\n  const middleware = addLogger ? applyMiddleware(thunk, logger) : applyMiddleware(thunk);\n  const store = createStore(authReducer, presistedState, middleware);\n  store.subscribe(() => {\n    localStorage.setItem('hoax-auth', JSON.stringify(store.getState()));\n    apiCalls.setAuthorizationHeader(store.getState());\n  });\n  return store;\n};\n\nexport default configureStore;","map":{"version":3,"sources":["/Users/paulo.kinjo/Documents/Projects/Java/hoaxify/frontend/src/redux/configureStore.js"],"names":["apiCalls","applyMiddleware","createStore","authReducer","logger","thunk","configureStore","addLogger","localStorageData","localStorage","getItem","presistedState","id","username","displayName","image","password","isLoggedIn","JSON","parse","error","middleware","store","subscribe","setItem","stringify","getState","setAuthorizationHeader"],"mappings":"AAAA,OAAO,KAAKA,QAAZ,MAA0B,iBAA1B;AAEA,SAASC,eAAT,EAA0BC,WAA1B,QAA6C,OAA7C;AAEA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,KAAP,MAAkB,aAAlB;;AAEA,MAAMC,cAAc,GAAG,CAACC,SAAS,GAAG,IAAb,KAAsB;AAC3C,MAAIC,gBAAgB,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvB;AACA,MAAIC,cAAc,GAAG;AACnBC,IAAAA,EAAE,EAAE,CADe;AAEnBC,IAAAA,QAAQ,EAAE,EAFS;AAGnBC,IAAAA,WAAW,EAAE,EAHM;AAInBC,IAAAA,KAAK,EAAE,EAJY;AAKnBC,IAAAA,QAAQ,EAAE,EALS;AAMnBC,IAAAA,UAAU,EAAE;AANO,GAArB;;AASA,MAAIT,gBAAJ,EAAsB;AACpB,QAAI;AACFG,MAAAA,cAAc,GAAGO,IAAI,CAACC,KAAL,CAAWX,gBAAX,CAAjB;AACD,KAFD,CAEE,OAAOY,KAAP,EAAc,CAAE;AACnB;;AAED,QAAMC,UAAU,GAAGd,SAAS,GACxBN,eAAe,CAACI,KAAD,EAAQD,MAAR,CADS,GAExBH,eAAe,CAACI,KAAD,CAFnB;AAGA,QAAMiB,KAAK,GAAGpB,WAAW,CAACC,WAAD,EAAcQ,cAAd,EAA8BU,UAA9B,CAAzB;AAEAC,EAAAA,KAAK,CAACC,SAAN,CAAgB,MAAM;AACpBd,IAAAA,YAAY,CAACe,OAAb,CAAqB,WAArB,EAAkCN,IAAI,CAACO,SAAL,CAAeH,KAAK,CAACI,QAAN,EAAf,CAAlC;AACA1B,IAAAA,QAAQ,CAAC2B,sBAAT,CAAgCL,KAAK,CAACI,QAAN,EAAhC;AACD,GAHD;AAKA,SAAOJ,KAAP;AACD,CA5BD;;AA8BA,eAAehB,cAAf","sourcesContent":["import * as apiCalls from '../api/apiCalls';\r\n\r\nimport { applyMiddleware, createStore } from 'redux';\r\n\r\nimport authReducer from './authReducer';\r\nimport logger from 'redux-logger';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst configureStore = (addLogger = true) => {\r\n  let localStorageData = localStorage.getItem('hoax-auth');\r\n  let presistedState = {\r\n    id: 0,\r\n    username: '',\r\n    displayName: '',\r\n    image: '',\r\n    password: '',\r\n    isLoggedIn: false,\r\n  };\r\n\r\n  if (localStorageData) {\r\n    try {\r\n      presistedState = JSON.parse(localStorageData);\r\n    } catch (error) {}\r\n  }\r\n\r\n  const middleware = addLogger\r\n    ? applyMiddleware(thunk, logger)\r\n    : applyMiddleware(thunk);\r\n  const store = createStore(authReducer, presistedState, middleware);\r\n\r\n  store.subscribe(() => {\r\n    localStorage.setItem('hoax-auth', JSON.stringify(store.getState()));\r\n    apiCalls.setAuthorizationHeader(store.getState());\r\n  });\r\n\r\n  return store;\r\n};\r\n\r\nexport default configureStore;\r\n"]},"metadata":{},"sourceType":"module"}